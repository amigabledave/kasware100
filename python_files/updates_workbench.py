from datetime import datetime, timedelta
today = (datetime.today() - timedelta(hours=6)).toordinal()

# ksu_set = {'KSU1':{'reward':100}, 'KSU2':{'punishment':1}, 'KSU3':{'dog':True}}
# attributes_to_add = {'reward':'1', 'punishment':'34'}
# attributes_to_delete = {'dog'}
# attribute_key = 'punishment'
# attribute_value = '34'

def add_ksu_attribute_to_set(ksu_set, attribute_key, attribute_value):
	for ksu in ksu_set:
		ksu = ksu_set[ksu]
		if attribute_key not in ksu:						
			ksu[attribute_key] = attribute_value
	return ksu_set
# add_ksu_attribute_to_set(ksu_set, attribute_key, attribute_value)
# print ksu_set


def delete_ksu_attribute_in_set(ksu_set, attribute_key):
	for ksu in ksu_set:
		ksu = ksu_set[ksu]
		if attribute_key in ksu:			
			del ksu[attribute_key]
	return ksu_set

# delete_ksu_attribute_in_set(ksu_set, attribute_key)
# print ksu_set


def structure_update(ksu_set, attributes_to_add, attributes_to_delete):
	for (attribute_key, attribute_value) in list(attributes_to_add.items()):
		add_ksu_attribute_to_set(ksu_set, attribute_key, attribute_value)

	for attribute_key in attributes_to_delete:
		delete_ksu_attribute_in_set(ksu_set, attribute_key)

	return ksu_set

ksu_set = {'KAS4_1012': {'status': 'Active', 'is_visible': True, 'description': 'Seguir comiendo cuando ya no tengo hambre', 'circumstance': 'Voy a dejar de comer por al menos 10 minutos', 'importance': '13', 'id': 'KAS4_1012', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V400', 'parent_id': None, 'subtype': None, 'exceptions': 'Vaccaciones. Comida gratis y deliciosa.', 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1015': {'status': 'Active', 'origin': None, 'description': u'Irme a dormir despu\xe9s de las 10:30 PM de Domingo a Jueves, o de las 2:30AM Viernes y Sabado', 'circumstance': None, 'importance': u'13', 'id': 'KAS4_1015', 'tags': None, 'comments': None, 'success_since': None, 'subtype': None, 'streak': '0', 'is_critical': False, 'is_visible': True, 'question_frequency': '1', 'parent_id': None, 'exceptions': None, 'value_type': u'V400', 'reward': '1', 'punishment': '34', 'is_private': False, 'record': '0'}, 'KAS4_1007': {'status': 'Deleted', 'is_visible': False, 'description': 'Despertarme mas tarde de las 7:30 AM entre semana', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1007', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1011': {'status': 'Active', 'is_visible': True, 'description': 'Ver mas de 2 capitulos de una serie al dia', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1011', 'tags': None, 'is_private': False, 'comments': 'Cuando veo mas seguro quizo decir que por flojo no hice otra actividad que pude haber disfrutado mas como leer', 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1008': {'status': 'Active', 'is_visible': True, 'description': 'Procastinar', 'circumstance': 'Cuando me de cuenta que estoy procastinandoDentro de los siguientes 2 minutos me voy: 1. Identificar que es aquello que estoy postergando hacer; 2. Comenzar a ejecutar Poner a hacer aquello que estoy postergando hacer.', 'importance': '13', 'id': 'KAS4_1008', 'tags': None, 'is_private': False, 'comments': 'Voy a actuar como el Bufalo y dejar de actuar como la Vaca. En otras palabras<> aventarme de lleno contra la tormenta para minimizar el tiempo de exposicion<> en lugar de correr para intentar escapar de ella y asi solo conseguir maximizar el tiempo de exposicion :)', 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1009': {'status': 'Active', 'is_visible': True, 'description': 'Romper una promesa que me hice a mi mismo', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1009', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'set_details': {'origin': None, 'is_visible': False, 'set_size': 1015, 'id': 'KAS4_0', 'subtype': None, 'circumstance': None, 'comments': None, 'success_since': None, 'parent_id': None, 'status': 'Active', 'description': None, 'tags': None, 'importance': '3', 'set_type': 'KAS4', 'streak': '0', 'is_critical': False, 'value_type': None, 'question_frequency': '1', 'is_private': False, 'record': '0', 'exceptions': None, 'reward': '1', 'punishment': '34'}, 'KAS4_1010': {'status': 'Active', 'is_visible': True, 'description': u'Despertarme mas tarde de las 7:30 AM entre semana u 8:00 AM los domingos', 'circumstance': None, 'importance': u'13', 'id': 'KAS4_1010', 'tags': None, 'is_private': False, 'comments': None, 'success_since': 735994, 'record': 2, 'streak': 2, 'is_critical': False, 'value_type': u'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': u'34', 'punishment': u'55', 'origin': None, 'question_frequency': '1'}, 'KAS4_1002': {'status': 'Active', 'is_visible': True, 'description': 'Romper una promesa que hice a otra persona', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1002', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V500', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1003': {'status': 'Active', 'is_visible': True, 'description': 'Hablar a las espaldas de alguien de algo que no le diria de frente', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1003', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V500', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1013': {'status': 'Active', 'is_visible': True, 'description': 'Tomar Shots de Alcohol', 'circumstance': 'Alguien me ofrece tomar un shotVoy a decir No gracias<> y si me pregunta que porque no<> voy a responder con una sonrisa No hay necesidad de una explicacion', 'importance': '13', 'id': 'KAS4_1013', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V400', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1001': {'status': 'Active', 'is_visible': True, 'description': 'Exprimirme granos', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1001', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V400', 'parent_id': None, 'subtype': None, 'exceptions': 'Salvo por granos me esten doliendo y se vea que tienen buen chance de salir sin hacer mucho dano', 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1006': {'status': 'Active', 'is_visible': True, 'description': 'Excederme del presupuesto que defini en Money Requirements', 'circumstance': None, 'importance': '13', 'id': 'KAS4_1006', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V800', 'parent_id': None, 'subtype': None, 'exceptions': 'Excederme por gastos que caigan dentro de la categoria Imprevistos (AKA Shit Happens)', 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1014': {'status': 'Deleted', 'is_visible': False, 'description': 'Lamentarme por una situacion de perdida de costo hundido', 'circumstance': 'Voy a pensar de la siguiente forma: Perdi dinero<> ni pedo<> asi es la vida. Aprendamos lo que se pueda aprender<> recuperamos lo que se pueda recuperar sin perder mas TIEMPO o dinero y sigamos adelante', 'importance': '13', 'id': 'KAS4_1014', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V100', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1004': {'status': 'Active', 'is_visible': True, 'description': 'Picarle las costillas a Dani', 'circumstance': None, 'importance': '5', 'id': 'KAS4_1004', 'tags': None, 'is_private': False, 'comments': 'Me dijo que le molestaba y que le dolia', 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V500', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}, 'KAS4_1005': {'status': 'Active', 'is_visible': True, 'description': 'Comprar objetos de algun tipo de contenido mientras mientras que tenga otro que no he consumido (libros<> audiolibros<> juegos de video<> juego de mesa)', 'circumstance': None, 'importance': '8', 'id': 'KAS4_1005', 'tags': None, 'is_private': False, 'comments': None, 'success_since': None, 'record': '0', 'streak': '0', 'is_critical': False, 'value_type': 'V700', 'parent_id': None, 'subtype': None, 'exceptions': None, 'reward': '1', 'punishment': '34', 'origin': None, 'question_frequency': '1'}}
attributes_to_add = {'question_frequency':'1','last_question':None,'next_question':today,}
attributes_to_delete = {}
print structure_update(ksu_set, attributes_to_add, attributes_to_delete)






